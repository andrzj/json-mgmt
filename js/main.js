let jn = '{"www":{"label":"Estad&atilde;o","label-menu":"","link":"http://www.estadao.com.br/","target":"","class_extra":"","itens":{"opiniao":{"label":"Opini&atilde;o","label-menu":"","link":"http://opiniao.estadao.com.br/","target":"","class_extra":"","itens":{}},"politica":{"label":"Pol&iacute;tica","label-menu":"","link":"http://politica.estadao.com.br/","target":"","class_extra":"","itens":{}},"economia":{"label":"Economia &amp; Neg&oacute;cios","label-menu":"","link":"http://economia.estadao.com.br/","target":"","class_extra":"","itens":{}},"brasil":{"label":"Brasil","label-menu":"","link":"http://brasil.estadao.com.br/","target":"","class_extra":"","itens":{}},"internacional":{"label":"Internacional","label-menu":"","link":"http://internacional.estadao.com.br/","target":"","class_extra":"","itens":{}},"esportes":{"label":"Esportes","label-menu":"","link":"http://esportes.estadao.com.br/","target":"","class_extra":"","itens":{}},"cultura":{"label":"Cultura","label-menu":"","link":"http://cultura.estadao.com.br/","target":"","class_extra":"","itens":{}},"ultimas":{"label":"&Uacute;ltimas","label-menu":"","link":"http://www.estadao.com.br/ultimas","target":"","class_extra":"","itens":{}},"assine":{"label":"Assine","label-menu":"","link":"http://www.assineestadao.com.br/?pOg=32793&utm_source=portal_estadao_selo_superior&utm_medium=portal_estadao_selo_superior&utm_campaign=portal_estadao_selo_superior","target":"","class_extra":"menu_azul","itens":{}}}},"blogs":{"label":"Blogs","label-menu":"","link":"http://www.estadao.com.br//blogs","target":"","class_extra":"","itens":{}},"opiniao":{"label":"Opini&atilde;o","label-menu":"","link":"http://opiniao.estadao.com.br/","target":"","class_extra":"","itens":{"ultimas":{"label":"&Uacute;ltimas","label-menu":"","link":"http://opiniao.estadao.com.br/#ultimas","target":"","class_extra":"","itens":{}},"colunas":{"label":"Colunas","label-menu":"","link":"http://opiniao.estadao.com.br/colunas/","target":"","class_extra":"","itens":{}}}},"alias":{"label":"Aliás","label-menu":"","link":"http://alias.estadao.com.br/","target":"","class_extra":"","itens":{"ultimas":{"label":"Últimas","label-menu":"","link":"http://alias.estadao.com.br/#ultimas","target":"","class_extra":"","itens":{}}}},"politica":{"label":"Pol&iacute;tica","label-menu":"","link":"http://politica.estadao.com.br/","target":"","class_extra":"","itens":{"ultimas":{"label":"&Uacute;ltimas","label-menu":"","link":"http://politica.estadao.com.br/#ultimas","target":"","class_extra":"","itens":{}},"broadcastpolitico":{"label":"Broadcast Pol&iacute;tico","label-menu":"","link":"http://www.broadcastpolitico.com.br/","target":"_blank","class_extra":"","itens":{}},"eleicoes":{"label":"Elei&ccedil;&otilde;es","label-menu":"","link":"http://politica.estadao.com.br/eleicoes/2016","target":"","class_extra":"","itens":{"2016":{"label":"Elei&ccedil;&otilde;es 2016","label-menu":"","link":"http://politica.estadao.com.br/eleicoes/2016","target":"","class_extra":"","itens":{"ultimas":{"label":"&Uacute;ltimas","label-menu":"","link":"http://politica.estadao.com.br/eleicoes/2016/#ultimas","target":"","class_extra":"","itens":{}},"cobertura-votacao-apuracao-primeiro-turno":{"label":"Apuração 1º turno","label-menu":"","link":"http://politica.estadao.com.br/eleicoes/2016/cobertura-votacao-apuracao/primeiro-turno","target":"","class_extra":"","itens":{}},"cobertura-votacao-apuracao-segundo-turno":{"label":"Apuração 2º turno","label-menu":"","link":"http://politica.estadao.com.br/eleicoes/2016/cobertura-votacao-apuracao/segundo-turno","target":"","class_extra":"","itens":{}},"candidatos":{"label":"Candidatos","label-menu":"","link":"http://politica.estadao.com.br/eleicoes/2016/candidatos","target":"","class_extra":"","itens":{}},"infograficos":{"label":"Infográficos","label-menu":"","link":"http://politica.estadao.com.br/eleicoes/2016/infograficos","target":"","class_extra":"","itens":{}},"pesquisas":{"label":"Pesquisas","label-menu":"","link":"http://politica.estadao.com.br/eleicoes/2016/pesquisas/primeiro-turno/prefeito/sp/sao-paulo","target":"","class_extra":"","itens":{}},"quiz":{"label":"Qual seu candidato?","label-menu":"","link":"http://politica.estadao.com.br/eleicoes/2016/quiz","target":"","class_extra":"","itens":{}}}}}},"estadaodados":{"label":"Estad&atilde;o Dados","label-menu":"","link":"http://blog.estadaodados.com/","target":"_blank","class_extra":"","itens":{}},"panama-papers":{"label":"Panam&aacute; Papers","label-menu":"","link":"http://politica.estadao.com.br/panama-papers/","target":"","class_extra":"","itens":{}},"colunas":{"label":"Colunas","label-menu":"","link":"http://politica.estadao.com.br/colunas","target":"","class_extra":"","itens":{}},"blogs":{"label":"Blogs","label-menu":"","link":"http://politica.estadao.com.br/blogs","target":"","class_extra":"","itens":{}},"discute":{"label":"Discute","label-menu":"","link":"http://politica.estadao.com.br/discute","target":"","class_extra":"","itens":{}}}},"economia":{"label":"Economia &amp; Neg&oacute;cios","label-menu":"","link":"http://economia.estadao.com.br/","target":"","class_extra":"","itens":{"ultimas":{"label":"&Uacute;ltimas","label-menu":"","link":"http://economia.estadao.com.br/#ultimas","target":"","class_extra":"","itens":{}},"broadcast":{"label":"Broadcast","label-menu":"","link":"http://economia.estadao.com.br/broadcast/","target":"","class_extra":"","itens":{}},"fatos-relevantes":{"label":"Fatos Relevantes","label-menu":"","link":"http://economia.estadao.com.br/fatos-relevantes/","target":"","class_extra":"","itens":{}},"ferramentas":{"label":"Ferramentas","label-menu":"","link":"http://economia.estadao.com.br/ferramentas/","target":"","class_extra":"","itens":{}},"governanca":{"label":"Governan&ccedil;a","label-menu":"","link":"http://economia.estadao.com.br/governanca/","target":"","class_extra":"","itens":{}},"indicadores":{"label":"Indicadores","label-menu":"","link":"http://economia.estadao.com.br/indicadores-economicos/","target":"","class_extra":"","itens":{}},"negocios":{"label":"Neg&oacute;cios","label-menu":"","link":"http://economia.estadao.com.br/negocios/","target":"","class_extra":"","itens":{}},"seu-imovel":{"label":"Seu Im&oacute;vel","label-menu":"","link":"http://economia.estadao.com.br/seu-imovel/","target":"","class_extra":"","itens":{}},"sua-carreira":{"label":"Sua Carreira","label-menu":"","link":"http://economia.estadao.com.br/sua-carreira/","target":"","class_extra":"","itens":{}},"suas-contas":{"label":"Suas Contas","label-menu":"","link":"http://economia.estadao.com.br/suas-contas/","target":"","class_extra":"","itens":{}},"colunas":{"label":"Colunas","label-menu":"","link":"http://economia.estadao.com.br/colunas","target":"","class_extra":"","itens":{}},"blogs":{"label":"Blogs","label-menu":"","link":"http://economia.estadao.com.br/blogs","target":"","class_extra":"","itens":{}},"discute":{"label":"Discute","label-menu":"","link":"http://economia.estadao.com.br/discute","target":"","class_extra":"","itens":{}}}},"brasil":{"label":"Brasil","label-menu":"","link":"http://brasil.estadao.com.br/","target":"","class_extra":"","itens":{"ultimas":{"label":"&Uacute;ltimas","label-menu":"","link":"http://brasil.estadao.com.br/#ultimas","target":"","class_extra":"","itens":{}},"carnaval":{"label":"Carnaval","label-menu":"","link":"http://brasil.estadao.com.br/carnaval/2017","target":"","class_extra":"","itens":{"ultimas":{"label":"&Uacute;ltimas","label-menu":"","link":"http://brasil.estadao.com.br/carnaval/2017#ultimas","target":"","class_extra":"","itens":{}},"apuracao-sp":{"label":"Apuração São Paulo","label-menu":"","link":"http://brasil.estadao.com.br/carnaval/2017/sao-paulo/apuracao","target":"","class_extra":"","itens":{}},"apuracao-rj":{"label":"Apuração Rio","label-menu":"","link":"http://brasil.estadao.com.br/carnaval/2017/rio-de-janeiro/apuracao","target":"","class_extra":"","itens":{}},"escolas-sp":{"label":"Blocos de São Paulo","label-menu":"","link":"http://infograficos.estadao.com.br/cultura/divirta-se/carnaval/2017/blocos-de-rua/","target":"","class_extra":"","itens":{}},"escolas-rj":{"label":"Blocos do Rio","label-menu":"","link":"http://brasil.estadao.com.br/noticias/rio-de-janeiro,confira-os-blocos-que-vao-desfilar-no-carnaval-do-rio,70001663700","target":"","class_extra":"","itens":{}}}},"cidades":{"label":"Cidades","label-menu":"","link":"http://brasil.estadao.com.br/cidades/","target":"","class_extra":"","itens":{}},"sao-paulo":{"label":"São Paulo","label-menu":"","link":"http://sao-paulo.estadao.com.br/","target":"","class_extra":"","itens":{}},"colunas":{"label":"Colunas","label-menu":"","link":"http://brasil.estadao.com.br/colunas","target":"","class_extra":"","itens":{}},"blogs":{"label":"Blogs","label-menu":"","link":"http://brasil.estadao.com.br/blogs","target":"","class_extra":"","itens":{}}}},"sao-paulo":{"label":"S&atilde;o Paulo","label-menu":"São Paulo","link":"http://sao-paulo.estadao.com.br/","target":"","class_extra":"","itens":{"ultimas":{"label":"&Uacute;ltimas","label-menu":"","link":"http://sao-paulo.estadao.com.br/#ultimas","target":"","class_extra":"","itens":{}},"colunas":{"label":"Colunas","label-menu":"","link":"http://sao-paulo.estadao.com.br/colunas","target":"","class_extra":"","itens":{}},"blogs":{"label":"Blogs","label-menu":"","link":"http://sao-paulo.estadao.com.br/blogs","target":"","class_extra":"","itens":{}}}},"saude":{"label":"Sa&uacute;de","label-menu":"Saúde","link":"http://saude.estadao.com.br/","target":"","class_extra":"","itens":{"ultimas":{"label":"&Uacute;ltimas","label-menu":"","link":"http://saude.estadao.com.br/#ultimas","target":"","class_extra":"","itens":{}},"colunas":{"label":"Colunas","label-menu":"","link":"http://saude.estadao.com.br/colunas","target":"","class_extra":"","itens":{}}}},"educacao":{"label":".Edu","label-menu":"","link":"http://educacao.estadao.com.br/","target":"","class_extra":"","itens":{"ultimas":{"label":"&Uacute;ltimas","label-menu":"","link":"http://educacao.estadao.com.br/#ultimas","target":"","class_extra":"","itens":{}},"colunas":{"label":"Colunas","label-menu":"","link":"http://educacao.estadao.com.br/colunas","target":"","class_extra":"","itens":{}},"blogs":{"label":"Blogs","label-menu":"","link":"http://educacao.estadao.com.br/blogs","target":"","class_extra":"","itens":{}}}},"colunas":{"label":"Colunas","label-menu":"","link":"http://www.estadao.com.br/colunas","target":"","class_extra":"","itens":{}},"ciencia":{"label":"Ci&ecirc;ncia","label-menu":"","link":"http://ciencia.estadao.com.br/","target":"","class_extra":"","itens":{"ultimas":{"label":"&Uacute;ltimas","label-menu":"","link":"http://ciencia.estadao.com.br/#ultimas","target":"","class_extra":"","itens":{}},"colunas":{"label":"Colunas","label-menu":"","link":"http://ciencia.estadao.com.br/colunas","target":"","class_extra":"","itens":{}},"blogs":{"label":"Blogs","label-menu":"","link":"http://ciencia.estadao.com.br/blogs","target":"","class_extra":"","itens":{}}}},"sustentabilidade":{"label":"Sustentabilidade","label-menu":"","link":"http://sustentabilidade.estadao.com.br/","target":"","class_extra":"","itens":{"ultimas":{"label":"&Uacute;ltimas","label-menu":"","link":"http://sustentabilidade.estadao.com.br/#ultimas","target":"","class_extra":"","itens":{}},"colunas":{"label":"Colunas","label-menu":"","link":"http://sustentabilidade.estadao.com.br/colunas","target":"","class_extra":"","itens":{}},"blogs":{"label":"Blogs","label-menu":"","link":"http://sustentabilidade.estadao.com.br/blogs","target":"","class_extra":"","itens":{}}}},"internacional":{"label":"Internacional","label-menu":"","link":"http://internacional.estadao.com.br/","target":"","class_extra":"","itens":{"ultimas":{"label":"&Uacute;ltimas","label-menu":"","link":"http://internacional.estadao.com.br/#ultimas","target":"","class_extra":"","itens":{}},"nytiw":{"label":"NYTIW","label-menu":"","link":"http://internacional.estadao.com.br/nytiw","target":"","class_extra":"","itens":{}},"colunas":{"label":"Colunas","label-menu":"","link":"http://internacional.estadao.com.br/colunas","target":"","class_extra":"","itens":{}},"blogs":{"label":"Blogs","label-menu":"","link":"http://internacional.estadao.com.br/blogs","target":"","class_extra":"","itens":{}}}},"esportes":{"label":"Esportes","label-menu":"","link":"http://esportes.estadao.com.br/","target":"","class_extra":"","itens":{"ultimas":{"label":"&Uacute;ltimas","label-menu":"","link":"http://esportes.estadao.com.br/#ultimas","target":"","class_extra":"","itens":{}},"basquete":{"label":"Basquete","label-menu":"","link":"http://esportes.estadao.com.br/basquete/","target":"","class_extra":"","itens":{}},"futebol":{"label":"Futebol","label-menu":"","link":"http://esportes.estadao.com.br/futebol/","target":"","class_extra":"","itens":{"ao-vivo":{"label":"Ao Vivo","label-menu":"","link":"http://esportes.estadao.com.br/aovivo/","target":"","class_extra":"","itens":{}},"classificacao":{"label":"Brasileirão","label-menu":"","link":"http://esportes.estadao.com.br/classificacao/futebol/campeonato-brasileiro-serie-a/2016","target":"","class_extra":"","itens":{}},"mercado-da-bola":{"label":"Mercado da Bola","label-menu":"","link":"http://esportes.estadao.com.br/futebol/mercado-da-bola/","target":"","class_extra":"","itens":{}},"portal-do-torcedor":{"label":"Portal do Torcedor","label-menu":"","link":"http://esportes.estadao.com.br/futebol/portal-do-torcedor/","target":"","class_extra":"","itens":{}},"copa-do-mundo":{"label":"Copa do Mundo","label-menu":"","link":"http://esportes.estadao.com.br/futebol/copa-do-mundo/","target":"","class_extra":"","itens":{}}}},"olimpiada":{"label":"Olimp&iacute;ada 2016","label-menu":"","link":"http://esportes.estadao.com.br/olimpiada/2016/","target":"","class_extra":"","itens":{"agenda-e-resultados":{"label":"Agenda e resultados","label-menu":"","link":"http://esportes.estadao.com.br/olimpiada/2016/agenda/","target":"","class_extra":"","itens":{}},"medalhas":{"label":"Medalhas","label-menu":"","link":"http://esportes.estadao.com.br/olimpiada/2016/medalhas/","target":"","class_extra":"","itens":{}},"modalidades":{"label":"Modalidades","label-menu":"","link":"http://esportes.estadao.com.br/olimpiada/2016/modalidades/","target":"","class_extra":"","itens":{}},"atletas":{"label":"Atletas","label-menu":"","link":"http://esportes.estadao.com.br/olimpiada/2016/atletas/","target":"","class_extra":"","itens":{}},"paises":{"label":"Paises","label-menu":"","link":"http://esportes.estadao.com.br/olimpiada/2016/paises/","target":"","class_extra":"","itens":{}},"locais-de-prova":{"label":"Locais de prova","label-menu":"","link":"http://esportes.estadao.com.br/olimpiada/2016/locais-de-prova/","target":"","class_extra":"","itens":{}},"linha-do-tempo":{"label":"Linha do tempo","label-menu":"","link":"http://esportes.estadao.com.br/olimpiada/2016/linha-do-tempo/","target":"","class_extra":"","itens":{}},"paralimpiada":{"label":"Paralimpíada 2016","label-menu":"","link":"http://esportes.estadao.com.br/olimpiada/2016/paralimpiada/","target":"","class_extra":"","itens":{"ultimas":{"label":"Últimas","label-menu":"","link":"http://esportes.estadao.com.br/olimpiada/2016/paralimpiada/#ultimas","target":"","class_extra":"","itens":{}},"agenda":{"label":"Agenda","label-menu":"","link":"http://esportes.estadao.com.br/olimpiada/2016/paralimpiada/agenda/","target":"","class_extra":"","itens":{}},"medalhas":{"label":"Medalhas","label-menu":"","link":"http://esportes.estadao.com.br/olimpiada/2016/paralimpiada/medalhas/","target":"","class_extra":"","itens":{}}}}}},"tenis":{"label":"T&ecirc;nis","label-menu":"","link":"http://esportes.estadao.com.br/tenis/","target":"","class_extra":"","itens":{}},"ufc":{"label":"UFC","label-menu":"","link":"http://esportes.estadao.com.br/ufc/","target":"","class_extra":"","itens":{}},"velocidade":{"label":"Velocidade","label-menu":"","link":"http://esportes.estadao.com.br/velocidade/","target":"","class_extra":"","itens":{"calendario":{"label":"Calend&aacute;rio","label-menu":"","link":"http://esportes.estadao.com.br/velocidade/formula-1/calendario/","target":"","class_extra":"","itens":{}},"classificacao":{"label":"Classifica&ccedil;&atilde;o","label-menu":"","link":"http://esportes.estadao.com.br/velocidade/formula-1/classificacao/","target":"","class_extra":"","itens":{}}}},"volei":{"label":"V&ocirc;lei","label-menu":"","link":"http://esportes.estadao.com.br/volei/","target":"","class_extra":"","itens":{}},"colunas":{"label":"Colunas","label-menu":"","link":"http://esportes.estadao.com.br/colunas","target":"","class_extra":"","itens":{}},"blogs":{"label":"Blogs","label-menu":"","link":"http://esportes.estadao.com.br/blogs","target":"","class_extra":"","itens":{}},"discute":{"label":"Discute","label-menu":"","link":"http://esportes.estadao.com.br/discute","target":"","class_extra":"","itens":{}},"programacao-de-tv":{"label":"Programação de TV","label-menu":"","link":"http://esportes.estadao.com.br/programacao/natv","target":"","class_extra":"","itens":{}}}},"cultura":{"label":"Cultura","label-menu":"","link":"http://cultura.estadao.com.br/","target":"","class_extra":"","itens":{"ultimas":{"label":"&Uacute;ltimas","label-menu":"","link":"http://cultura.estadao.com.br/#ultimas","target":"","class_extra":"","itens":{}},"artes":{"label":"Artes","label-menu":"","link":"http://cultura.estadao.com.br/artes/","target":"","class_extra":"","itens":{}},"cinema":{"label":"Cinema","label-menu":"","link":"http://cultura.estadao.com.br/cinema/","target":"","class_extra":"","itens":{"guia-de-cinema":{"label":"Guia de Cinema","label-menu":"","link":"http://cultura.estadao.com.br/divirta-se/guia-de-cinema/","target":"","class_extra":"","itens":{}}}},"divirta-se":{"label":"Divirta-se","label-menu":"","link":"http://cultura.estadao.com.br/divirta-se/","target":"","class_extra":"","itens":{"ultimas":{"label":"Últimas","label-menu":"","link":"http://cultura.estadao.com.br/divirta-se/#ultimas","target":"","class_extra":"","itens":{}},"guia-de-cinema":{"label":"Guia de Cinema","label-menu":"","link":"http://cultura.estadao.com.br/divirta-se/guia-de-cinema/","target":"","class_extra":"","itens":{"filmes":{"label":"Filmes","label-menu":"","link":"http://cultura.estadao.com.br/divirta-se/guia-de-cinema/filmes","target":"","class_extra":"","itens":{}},"cinemas":{"label":"Cinemas","label-menu":"","link":"http://cultura.estadao.com.br/divirta-se/guia-de-cinema/cinemas","target":"","class_extra":"","itens":{}}}}}},"literatura":{"label":"Literatura","label-menu":"","link":"http://cultura.estadao.com.br/literatura/","target":"","class_extra":"","itens":{}},"musica":{"label":"M&uacute;sica","label-menu":"","link":"http://cultura.estadao.com.br/musica/","target":"","class_extra":"","itens":{}},"teatro-danca":{"label":"Teatro e Dan&ccedil;a","label-menu":"","link":"http://cultura.estadao.com.br/teatro-danca/","target":"","class_extra":"","itens":{}},"televisao":{"label":"Televis&atilde;o","label-menu":"","link":"http://cultura.estadao.com.br/televisao/","target":"","class_extra":"","itens":{}},"quadrinhos":{"label":"Quadrinhos","label-menu":"","link":"http://cultura.estadao.com.br/quadrinhos/","target":"","class_extra":"","itens":{}},"colunas":{"label":"Colunas","label-menu":"","link":"http://cultura.estadao.com.br/colunas","target":"","class_extra":"","itens":{}},"blogs":{"label":"Blogs","label-menu":"","link":"http://cultura.estadao.com.br/blogs","target":"","class_extra":"","itens":{}}}},"fotos":{"label":"Fotos","label-menu":"","link":"http://fotos.estadao.com.br/","target":"","class_extra":"","itens":{}},"busca":{"label":"Busca","label-menu":"","link":"http://busca.estadao.com.br/","target":"","class_extra":"","itens":{}},"ultimas":{"label":"Últimas","label-menu":"","link":"http://www.estadao.com.br/ultimas","target":"","class_extra":"","itens":{}},"fale-conosco":{"label":"Fale Conosco","label-menu":"","link":"http://www.estadao.com.br/fale-conosco","target":"","class_extra":"","itens":{}},"error":{"label":"Estadão","label-menu":"","link":"http://www.estadao.com.br","target":"","class_extra":"","itens":{}},"infograficos":{"label":"Infográficos","label-menu":"","link":"http://www.estadao.com.br/infograficos","target":"","class_extra":"","itens":{}},"tempo":{"label":"Previsão do Tempo","label-menu":"","link":"http://www.estadao.com.br/clima-e-tempo","target":"","class_extra":"","itens":{}},"ao-vivo":{"label":"Ao Vivo","label-menu":"","link":"http://www.estadao.com.br/aovivo","target":"","class_extra":"","itens":{}},"aeroportos":{"label":"Aeroportos","label-menu":"","link":"http://www.estadao.com.br/aeroportos","target":"","class_extra":"","itens":{}},"loterias":{"label":"Loterias","label-menu":"","link":"http://loterias.estadao.com.br/","target":"","class_extra":"","itens":{"mega-sena":{"label":"Mega Sena","label-menu":"","link":"http://loterias.estadao.com.br/megasena","target":"","class_extra":""},"dupla-sena":{"label":"Dupla Sena","label-menu":"","link":"http://loterias.estadao.com.br/dupla-sena","target":"","class_extra":""},"quina":{"label":"Quina","label-menu":"","link":"http://loterias.estadao.com.br/quina","target":"","class_extra":""},"lotomania":{"label":"Lotomania","label-menu":"","link":"http://loterias.estadao.com.br/lotomania","target":"","class_extra":""},"lotofacil":{"label":"Lotofácil","label-menu":"","link":"http://loterias.estadao.com.br/lotofacil","target":"","class_extra":""},"federal":{"label":"Federal","label-menu":"","link":"http://loterias.estadao.com.br/federal","target":"","class_extra":""},"loteca":{"label":"Loteca","label-menu":"","link":"http://loterias.estadao.com.br/loteca","target":"","class_extra":""}}},"vida-estilo":{"label":"E+","label-menu":"","link":"http://emais.estadao.com.br/","target":"","class_extra":"","itens":{"ultimas":{"label":"&Uacute;ltimas","label-menu":"","link":"http://emais.estadao.com.br/ultimas/","target":"","class_extra":""},"bem-estar":{"label":"Bem Estar","label-menu":"","link":"http://emais.estadao.com.br/bem-estar/","target":"","class_extra":""},"blogs":{"label":"Blogs","label-menu":"","link":"http://vida-estilo.estadao.com.br/blogs/","target":"","class_extra":""},"bora-ai":{"label":"BORA.AI","label-menu":"","link":"http://bora.ai/","target":"","class_extra":""},"casa-decoracao":{"label":"Casa & Decoração","label-menu":"","link":"http://emais.estadao.com.br/casa-decoracao/","target":"","class_extra":""},"comportamento":{"label":"Comportamento","label-menu":"","link":"http://emais.estadao.com.br/comportamento/","target":"","class_extra":""},"gente":{"label":"Gente","label-menu":"","link":"http://emais.estadao.com.br/gente/","target":"","class_extra":""},"moda-beleza":{"label":"Moda & Beleza","label-menu":"","link":"http://emais.estadao.com.br/moda-beleza/","target":"","class_extra":""},"horoscopo":{"label":"Horóscopo","label-menu":"","link":"http://horoscopo.estadao.com.br/","target":"","class_extra":""},"papo-de-mae":{"label":"Papo de mãe","label-menu":"","link":"http://www.papodemae.com.br/","target":"","class_extra":""},"tv":{"label":"TV","label-menu":"","link":"http://emais.estadao.com.br/tv/","target":"","class_extra":""}}},"discute":{"label":"Discute","label-menu":"","link":"http://www.estadao.com.br/discute","target":"","class_extra":"","itens":{}},"correcoes":{"label":"Correções","label-menu":"","link":"","target":"","class_extra":"","itens":{"texto-com-correcoes":{"label":"Textos com correções","label-menu":"Textos com correções","link":"http://www.estadao.com.br/correcoes","target":"","class_extra":"","itens":{}},"envie-uma-correcao":{"label":"Envie uma correção","label-menu":"Envie uma correção","link":"http://www.estadao.com.br/correcoes/enviar","target":"","class_extra":"","itens":{}}}},"mais-lidas":{"label":"Mais Lidas","label-menu":"","link":"http://www.estadao.com.br/mais-lidas","target":"","class_extra":"","itens":{}},"tv-estadao":{"label":"TV Estadão","label-menu":"","link":"http://tv.estadao.com.br","target":"","class_extra":"","itens":{}},"termo-de-uso":{"label":"Termo de Uso","label-menu":"","link":"http://www.estadao.com.br/termo-de-uso","target":"","class_extra":"","itens":{}},"login":{"label":"Login","label-menu":"","link":"","target":"","class_extra":"","itens":{}},"cadastro":{"label":"Cadastro","label-menu":"","link":"","target":"","class_extra":"","itens":{}},"esqueci-minha-senha":{"label":"Esqueci minha senha","label-menu":"","link":"//acesso.estadao.com.br/login/esqueci-minha-senha","target":"","class_extra":"esqueci-senha","itens":{}},"acesso":{"label":"Meu perfil","label-menu":"","link":"","target":"","class_extra":"","itens":{"dados-de-cadastro":{"label":"Dados de cadastro","label-menu":"Dados de cadastro","link":"//acesso.estadao.com.br/login/minha-conta","target":"","class_extra":"","itens":{}},"newsletter":{"label":"Newsletter","label-menu":"Newsletter","link":"//acesso.estadao.com.br/login/minha-conta/newsletter","target":"","class_extra":"","itens":{}},"estadao-jornal-digital":{"label":"Estadão Jornal Digital","label-menu":"Estadão Jornal Digital","link":"//acesso.estadao.com.br/login/?origem=dp","target":"","class_extra":"","itens":{}},"central-do-assinante":{"label":"Central do assinante","label-menu":"Central do assinante","link":"//www.assinante.estadao.com.br/","target":"_blank","class_extra":"","itens":{}},"sair-da-conta":{"label":"Sair da conta","label-menu":"Sair da conta","link":"//acesso.estadao.com.br/login/logout/","target":"","class_extra":"","itens":{}}}}}';
let jnParse = JSON.parse(jn);
let dialog, editDialog, form, editForm, addPlaceReference, currItem, currItemObject;
let htm = "";
let jsn = {};
let allFields = $([]).add($("#name")).add($("#label")).add($("#label-menu")).add($("#class_extra")).add($("#target")).add($("#link"));
let dvCount1 = 1000;
let dvCount2 = 2000;
let css = {
    border: 'none',
    padding: '15px',
    backgroundColor: '#000',
    opacity: '.5',
    color: '#FFF',
    fontWeight: 'bold',
    fontFamily: 'arial'
};

let writeLabel = (obj) => {
    if (obj !== null && obj !== undefined) {
        if (Object.keys(obj).length <= 0) {
            return;
        }
    } else { return; }
    htm += '<div class="accordion">';
    for (lb in obj) {
        htm += '<div class="group"><h3 data-name="' + lb + '" data-class_extra="' + obj[lb].class_extra + '" data-link="' + obj[lb].link + '" data-label="' + obj[lb].label + '" data-target="' + obj[lb].target + '">';
        htm += obj[lb].label;
        htm += '</h3>';
        htm += '<div><p><a href="#" onclick="openAddDialog($(this))">Adicionar</a> | <a href="#" onclick="openEditDialog($(this))">Editar</a> | <a href="#" onclick="confirmToDeleteMenu($(this))">Excluir</a></p>';
        writeLabel(obj[lb].itens);
        htm += '</div></div>';
    }
    htm += '</div>';
};

let writeJSON = () => {
    $("#main > .accordion > .group").each(function() {
        geraJSON($(this), jsn);
    });
};

let geraJSON = (sel, jsnPrw) => {
    let currNode = sel.children("h3").data("name");
    jsnPrw[currNode] = {};
    jsnPrw[currNode].label = sel.find("h3").data("label");
    jsnPrw[currNode].class_extra = sel.find("h3").data("class_extra") || "";
    jsnPrw[currNode].target = sel.find("h3").data("target");
    jsnPrw[currNode].link = sel.find("h3").data("link");
    jsnPrw[currNode].itens = {};
    if (sel.children("div").children(".accordion").children(".group").length <= 0) {
        return;
    } else {
        sel.children("div").children(".accordion").children(".group").each(function() {
            geraJSON($(this), jsnPrw[currNode].itens);
        });
    }
};

let openAddDialog = (elem) => {
    event.preventDefault();
    addPlaceReference = elem.parent().next();
    if (addPlaceReference.length <= 0) {
        elem.parent().after('<div class="accordion"></div>');
        addPlaceReference = elem.parent().next();
        setAccordion(addPlaceReference);
    }
    createAddDialog();
    dialog.dialog("open");
};

let createAddDialog = () => {
    dialog = $("#dialog-form").dialog({
        autoOpen: false,
        height: 460,
        width: 370,
        modal: true,
        position: {
            my: "center",
            at: "top",
            of: addPlaceReference
        },
        buttons: {
            "Criar ítem": addItem,
            Cancel: function() {
                dialog.dialog("close");
            }
        },
        close: function() {
            form[0].reset();
            allFields.removeClass("ui-state-error");
            $(".validateTips").text("");
        }
    });

    form = dialog.find("form").on("submit", function(event) {
        event.preventDefault();
        addItem();
    });
};

let addItem = () => {
    event.preventDefault();
    if (valid()) {
        addPlaceReference.append('<div class="group"><h3 data-name="' + $("#name").val().toLowerCase() + '" data-class_extra="' + $("#class_extra").val() + '" data-link="' + $("#link").val() + '" data-label="' + $("#label").val() + '" data-target="' + $("#target").val() + '" class="ui-accordion-header ui-corner-top ui-state-default ui-accordion-icons ui-sortable-handle ui-accordion-header-collapsed ui-corner-all" role="tab" id="ui-id-' + ++dvCount1 + '" aria-controls="ui-id-' + ++dvCount2 + '" aria-selected="false" aria-expanded="false" tabindex="-1"><span class="ui-accordion-header-icon ui-icon ui-icon-triangle-1-e"></span>' + $("#label").val() + '</h3><div class="ui-accordion-content ui-corner-bottom ui-helper-reset ui-widget-content" id="ui-id-' + dvCount2 + '" aria-labelledby="ui-id-' + dvCount1 + '" role="tabpanel" aria-hidden="true" style="display: none;"><p><a href="#" onclick="openAddDialog($(this))">Adicionar</a> | <a href="#" onclick="openEditDialog($(this))">Editar</a> | <a href="#" onclick="confirmToDeleteMenu($(this))">Excluir</a></p></div></div>');
        addPlaceReference.accordion("refresh");
        addPlaceReference = "";
        updateTips("");
        dialog.dialog("close");
        dialog = "";
    }
    return valid;
};

let openEditDialog = (ref) => {
    event.preventDefault();

    currItem = ref.parent().parent().prev();
    addPlaceReference = currItem;
    currItemObject = {
        name: currItem.data("name"),
        label: currItem.data("label"),
        class_extra: currItem.data("class_extra"),
        target: currItem.data("target"),
        link: currItem.data("link")
    };
    $("#name").val(currItemObject.name);
    $("#label").val(currItemObject.label);
    $("#class_extra").val(currItemObject.class_extra);
    $("#target").val(currItemObject.target);
    $("#link").val(currItemObject.link);
    createEditDialog();
    editDialog.dialog("open");
};

let createEditDialog = () => {
    editDialog = $("#dialog-form").dialog({
        autoOpen: false,
        height: 460,
        width: 370,
        modal: true,
        position: {
            my: "center",
            at: "center",
            of: addPlaceReference
        },
        buttons: {
            "Editar ítem": editItem,
            Cancel: function() {
                editDialog.dialog("close");
            }
        },
        close: function() {
            editForm[0].reset();
            allFields.removeClass("ui-state-error");
            $(".validateTips").text("");
        }
    });

    editForm = editDialog.find("form").on("submit", function(event) {
        event.preventDefault();
        editItem();
    });
};

let editItem = () => {
    event.preventDefault();
    if (valid()) {
        currItem.data("name", $("#name").val());
        currItem.data("label", $("#label").val());
        currItem.data("class_extra", $("#class_extra").val());
        currItem.data("target", $("#target").val());
        currItem.data("link", $("#link").val());
        currItem.html(currItem.children()[0]).append($("#label").val());
        currItem = "";
        currItemObject = {};
        updateTips("");
        editDialog.dialog("close");
        editDialog = "";
    }
};

let removeItem = (item) => {
    event.preventDefault();
    addPlaceReference = item.parent().next();
    if (addPlaceReference.length > 0) {
        alert("Impossível remover: Remova os ítens filhos antes de prosseguir");
    } else {
        item.parent().parent().parent().remove();
    }
};

let saveMenu = () => {
    $.blockUI({
        message: "Saving...",
        css: css
    });

    writeJSON();
    let value = JSON.stringify(jsn);

    // do as you wish

    setTimeout($.unblockUI, 1000);
};

let publishMenu = (pageGuid, linkGuid) => {
    $.blockUI({
        message: "Saving...",
        css: css
    });

    writeJSON();
    let value = JSON.stringify(jsn);

    // do as you wish

    setTimeout($.unblockUI, 1000);

};

$(function() {
    writeLabel(jnParse);
    $('#main').append(htm);

    setAccordion($(".accordion"));
});